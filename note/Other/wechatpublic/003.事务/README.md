## 事务



谈起事务，都会想起数据库和那个银行转账的案例吧。



事务，是数据库特性中的一条。在高性能mysql一书中，说了解mysql其他高级特性前，应该先了解事务。当然，事务其实也是一个比较容易理解的东西（因为其并没有和引擎和服务等打交道）。



事务，我们简单来说就是一组（一条或多条）sql语句。要么全部执行成功，要么全部执行失败。因此转账案例是最典型的例子。



经常面试的朋友就会知道，事务这里是必问的内容。首先就是其四大特性ACID。



- 原子性

    

- 一致性

    

- 隔离性

    

- 持久性

    

答出这些特性，那么就会有数据库的隔离级别有哪些，各个隔离级别会有什么问题，默认的隔离级别是什么，又是如何解决问题的呢？



这一连串的问题，如果不是特别熟悉，那么肯定会在某个问题上卡壳，被问住。



因为隔离级别的原因，会有脏读、不可重复度、幻读的问题。



首先要了解事务的执行是将sql语句执行，全部sql执行后才会提交，如果某条语句出错，则整个事务回滚到执行之前的状态。另一个就是mysql中innodb引擎的中将每个单独的sql语句也看作事务来操作的。



- 脏读 ：就是事务读取了其他事务未提交的数据。导致读取错误。
- 不可重复读：这个就是事务在连续读取的时候读取了不同的数据，称之为不可重复读
- 幻读：在事务执行间，操作的数据库行之间多出行，称之为幻行，读取的这个就为幻读



数据库的隔离级别为uncommit read、commit read、repeatable read、serial